# koishi-plugin-winp

[![npm](https://img.shields.io/npm/v/koishi-plugin-winp?style=flat-square)](https://www.npmjs.com/package/koishi-plugin-winp)

- 我们又赢了！
注：此版本为koishi-plugin-win的二次开发版，增加了ask指令自动发送vv表情包功能
- win指令
  - 使用名为“zvv”的数据表记录每天用户赢的结果，并限制每日只能赢一次
  - 其概率分别为：灵活赢 - 2%，小赢 - 48%，中赢 - 25%、大赢 - 17%、特大赢 - 5%、赢麻了 - 2%、[数据删除] - 1%
  - “共同富win”功能：win程度为1~2%时的结果为“灵活赢”，抽到“灵活赢”的用户当天可以再抽一次，赢的程度与当前最赢者（必须大赢及以上，否则失败）平分
  - “精准扶win”功能：若某用户连续3天抽到“小赢”，则其赢级会在第4天提高40%，最高为100%
  - “风口飞win”功能：每日从9-21点钟内随机抽取一小时，作为当日的“风口”，在该风口时间内首位win的用户将获得40%的加成，每群仅限一次（该功能优先于“精准扶win”，如果飞win后仍是小赢，则累积到后一天触发）
  - “心心相win”功能：群内赢级之和为99的两人，会获得来自教授的祝福
- win.window指令（别名：查看风口）
  - 需要3级权限
  - 用于在日志中查看当日风口
  - 风口在每日0时更新，若错过而没有生成风口，那么执行该指令会生成一个新的风口
  - 若风口已存在，则将其数值以及有用户触发“飞win”功能的群组均输出至日志中供查看
- win.help指令
  - 用于查看该插件的功能
- win.clear指令
  - 测试功能，需要5级权限
  - 使用后，清空该群当日所有赢级
  - 将赢级置为-1，且小赢者天数减1
- rank指令
  - 用于获取当前群的赢级排行，默认情况下显示前5名
  - 可选选项a或all，用于查看当前完整的当前群赢级排行
  - 可选选项s或statistics，用于查看当前群赢级的统计数据
  - 被“共同富win”功能“帮扶”过的用户与当前榜一，在参数all显示的排行榜中会被标注为“共赢”
- ask指令（别名：评价）
  - 后跟参数，可以让张教授做出评价
  - 该功能的实现使用本地语录库
  - 该功能接入了zvv.quest提供的api，可以在评价后发送对应图片


